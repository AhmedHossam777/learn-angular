<div class="min-h-screen bg-black text-white py-12">
  <div class="container mx-auto px-4 max-w-4xl">
    <h2 class="text-4xl sm:text-5xl md:text-6xl font-black text-center mb-10 tracking-tight uppercase">
      Add Product
    </h2>

    <form [formGroup]="productForm" (ngSubmit)="submit()" class="bg-zinc-900 rounded-lg p-6 sm:p-8 border border-zinc-800">

      <div class="mb-6">
        <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Title *</label>
        <input
          type="text"
          formControlName="title"
          class="w-full bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors">
        @if (title?.invalid && title?.touched) {
        <div class="mt-2 space-y-1">
          @if (title?.errors?.['required']) {
          <span class="text-red-500 text-sm block">Title is required</span>
          }
          @if (title?.errors?.['minlength']) {
          <span class="text-red-500 text-sm block">Minimum 2 characters required</span>
          }
          @if (title?.errors?.['maxlength']) {
          <span class="text-red-500 text-sm block">Maximum 200 characters allowed</span>
          }
        </div>
        }
      </div>

      <div class="mb-6">
        <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Price *</label>
        <input
          type="number"
          formControlName="price"
          step="0.01"
          class="w-full bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors">
        @if (price?.invalid && price?.touched) {
        <div class="mt-2 space-y-1">
          @if (price?.errors?.['required']) {
          <span class="text-red-500 text-sm block">Price is required</span>
          }
          @if (price?.errors?.['min']) {
          <span class="text-red-500 text-sm block">Price must be greater than 0</span>
          }
        </div>
        }
      </div>

      <div class="mb-6">
        <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Description *</label>
        <textarea
          formControlName="description"
          rows="4"
          class="w-full bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors resize-none"></textarea>
        @if (description?.invalid && description?.touched) {
        <div class="mt-2 space-y-1">
          @if (description?.errors?.['required']) {
          <span class="text-red-500 text-sm block">Description is required</span>
          }
          @if (description?.errors?.['minlength']) {
          <span class="text-red-500 text-sm block">Minimum 10 characters required</span>
          }
          @if (description?.errors?.['maxlength']) {
          <span class="text-red-500 text-sm block">Maximum 2000 characters allowed</span>
          }
        </div>
        }
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div>
          <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Category *</label>
          <input
            type="text"
            formControlName="category"
            class="w-full bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors">
          @if (category?.invalid && category?.touched) {
          <div class="mt-2 space-y-1">
            @if (category?.errors?.['required']) {
            <span class="text-red-500 text-sm block">Category is required</span>
            }
            @if (category?.errors?.['minlength']) {
            <span class="text-red-500 text-sm block">Minimum 2 characters required</span>
            }
          </div>
          }
        </div>

        <div>
          <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Brand *</label>
          <input
            type="text"
            formControlName="brand"
            class="w-full bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors">
          @if (brand?.invalid && brand?.touched) {
          <div class="mt-2 space-y-1">
            @if (brand?.errors?.['required']) {
            <span class="text-red-500 text-sm block">Brand is required</span>
            }
            @if (brand?.errors?.['minlength']) {
            <span class="text-red-500 text-sm block">Minimum 2 characters required</span>
            }
          </div>
          }
        </div>
      </div>

      <div class="mb-6">
        <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Stock *</label>
        <input
          type="number"
          formControlName="stock"
          class="w-full bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors">
        @if (stock?.invalid && stock?.touched) {
        <div class="mt-2 space-y-1">
          @if (stock?.errors?.['required']) {
          <span class="text-red-500 text-sm block">Stock is required</span>
          }
          @if (stock?.errors?.['min']) {
          <span class="text-red-500 text-sm block">Stock cannot be negative</span>
          }
        </div>
        }
      </div>

      <div class="mb-6" formArrayName="images">
        <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Images (URLs)</label>
        <button type="button" (click)="addImage()" class="btn btn-primary px-5 py-2 text-xs mb-4">
          + Add Image URL
        </button>

        @if (images.length > 0) {
        <div class="space-y-3">
          @for (imageControl of images.controls; track $index) {
          <div class="flex flex-col sm:flex-row gap-2">
            <input
              type="url"
              [formControlName]="$index"
              placeholder="https://example.com/image.jpg"
              class="flex-1 bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors">
            <button type="button" (click)="removeImage($index)" class="btn btn-danger px-5 py-3 text-xs whitespace-nowrap">
              Remove
            </button>
            @if (imageControl.invalid && imageControl.touched) {
            <div class="mt-2 space-y-1 w-full">
              @if (imageControl.errors?.['required']) {
              <span class="text-red-500 text-sm block">URL is required</span>
              }
              @if (imageControl.errors?.['pattern']) {
              <span class="text-red-500 text-sm block">Must be a valid URL (http:// or https://)</span>
              }
            </div>
            }
          </div>
          }
        </div>
        } @else {
        <p class="text-gray-500 text-sm italic">No images added yet</p>
        }
      </div>

      <div class="mb-8" formArrayName="tags">
        <label class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-2">Tags</label>
        <button type="button" (click)="addTag()" class="btn btn-primary px-5 py-2 text-xs mb-4">
          + Add Tag
        </button>

        @if (tags.length > 0) {
        <div class="space-y-3">
          @for (tagControl of tags.controls; track $index) {
          <div class="flex flex-col sm:flex-row gap-2">
            <input
              type="text"
              [formControlName]="$index"
              placeholder="Enter tag (2-30 characters)"
              class="flex-1 bg-black border border-zinc-700 text-white px-4 py-3 focus:outline-none focus:border-white transition-colors rounded">
            <button type="button" (click)="removeTag($index)" class="btn btn-danger px-5 py-3 text-xs whitespace-nowrap">
              Remove
            </button>
            @if (tagControl.invalid && tagControl.touched) {
            <div class="mt-2 space-y-1 w-full">
              @if (tagControl.errors?.['required']) {
              <span class="text-red-500 text-sm block">Tag is required</span>
              }
              @if (tagControl.errors?.['minlength']) {
              <span class="text-red-500 text-sm block">Minimum 2 characters</span>
              }
              @if (tagControl.errors?.['maxlength']) {
              <span class="text-red-500 text-sm block">Maximum 30 characters</span>
              }
            </div>
            }
          </div>
          }
        </div>
        } @else {
        <p class="text-gray-500 text-sm italic">No tags added yet</p>
        }
      </div>

      <div class="pt-4 border-t border-zinc-800">
        <button type="submit" [disabled]="productForm.invalid" class="btn btn-primary w-full py-4 text-lg">
          Submit Product
        </button>
        @if (productForm.invalid && productForm.touched) {
        <p class="text-red-500 text-sm text-center mt-4">Please correct the errors above before submitting</p>
        }
      </div>
    </form>
  </div>
</div>
